clientes
{
_id: ObjectId,
nombre: String,
email: String,
hashed_password: String,
telefono: String,
direcciones: [ { id: UUID, alias, calle, ciudad,
pais, codigo_postal } ],
fecha_registro: ISODate,
carrito_actual: ObjectId (ref carritos),
preferencias: { idioma, moneda },
estado: "activo" | "inactivo"
}
Categor√≠as
{
_id: ObjectId,
nombre: String,
slug: String,
descripcion: String,
parent_id: ObjectId | null,
fecha_creacion: ISODate
}
Productos
{
_id: ObjectId,
sku: String (opcional),
nombre: String,
descripcion: String,
categoria: { id: ObjectId, nombre: String },
precio: Number (moneda menor, ej. cents),
moneda: String,
atributos: { color, talla, marca, ... },
imagenes: [String],
stock_almacen_total: Number (campo derivado
opcional),
fecha_creacion: ISODate,
visible: Boolean,
reseas: [ { cliente_id, comentario,
calificacion, fecha } ]
}
Carritos
{
_id: ObjectId,
cliente_id: ObjectId,
items: [ { producto_id: ObjectId, nombre,
cantidad, precio_unitario, atributos } ],
subtotal: Number,
descuentos: [ { codigo, monto } ],
fecha_actualizacion: ISODate
}
Pedidos
{
_id: ObjectId,
cliente_id: ObjectId,
numero_pedido: String (nico, formato legible),
items: [ { producto_id, nombre, cantidad,
precio_unitario, impuestos, descuentos } ],
subtotal: Number,
impuestos: Number,
descuentos: Number,
total: Number,
estado: String (CREADO, PAGADO, ENVIADO,
ENTREGADO, CANCELADO),
direccion_envio: { ... },
direccion_facturacion: { ... },
pago: { metodo, transaccion_id, estado, fecha },
fecha_pedido: ISODate
}